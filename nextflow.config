params {
    samplesheet        = "$projectDir/assets/samplesheet.csv"
    quarto_mqc_report  = "$projectDir/docs/multiqc_report/quartoMultiqcDemo.qmd"
    outdir             = 'results'
    kmer_size          = 15
    publish_mode       = 'symlink'
    run_quality_check  = true
    run_profile_genome = true

    project_directory       = "$projectDir/assets/notebooks/*.{qmd,yml}"    
    quality_check_notebook  = "$projectDir/assets/notebooks/quality_check.qmd"
    profile_genome_notebook = "$projectDir/assets/notebooks/profile_genome.qmd"
}

process {
    withName: 'FASTQC' {
        publishDir       = [
            path: "$params.outdir/quality_check/fastqc",
            mode: params.publish_mode,
        ]
    }
    withName: 'GENOMESCOPE2' {
        ext.args         = "-p 1 -k ${params.kmer_size}"
        publishDir       = [
            path: "$params.outdir/profile_genome/genomescope2",
            mode: params.publish_mode,
        ]
    }
    withName: 'QUARTO_RENDER_PROJECT' {
        stageInMode      = 'copy'
        publishDir       = [
            path: "$params.outdir/report",
            mode: params.publish_mode,
            overwrite: true,
        ]
        ext.args         = '--profile report'
    }
}

includeConfig 'configs/nf-core_defaults.config'

profiles {
    standard {
        docker.enabled = true
        docker.registry = 'quay.io'
        docker.runOptions = '-u $(id -u):$(id -g) --platform=linux/amd64'
    }
    docker {
        docker.enabled = true
        docker.registry = 'quay.io'
        docker.runOptions = '-u $(id -u):$(id -g) --platform=linux/amd64'
    }
    conda {
        conda.enabled = true
    }
    debug {
        process.beforeScript = 'env'
    }
}